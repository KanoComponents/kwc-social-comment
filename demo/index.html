<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>kwc-social-comments demo</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">
    <link rel="import" href="../kwc-social-comments.html">

    <custom-style>
        <style is="custom-style" include="demo-pages-shared-styles">
            .centered {
                max-width: 620px;
                margin-left: auto;
                margin-right: auto;
            }
        </style>
    </custom-style>
</head>

<body>
    <div class="vertical-section-container centered">
        <h3>Basic kwc-social-comments demo</h3>
        <demo-snippet>
            <template>
                <kwc-social-comments></kwc-social-comments>
            </template>
        </demo-snippet>
        <h3>With content and listeners</h3>
        <demo-snippet>
            <template>
                <kwc-social-comments id="share-comment"
                                     item-id="59496a0d95c8344bcf3246ad">
                                    </kwc-social-comments>
                <script>
                    document.addEventListener('WebComponentsReady', function () {
                        const comment = document.querySelector('#share-comment');
                        comment.comments = MANY_COMMENTS.entries;
                        comment.nextPage = MANY_COMMENTS.next;
                        comment.loaderStatus = "on";
                        comment.addEventListener('flag-comment', function(e){
                            alert(`You flagged comment ${e.detail.index} with id ${e.detail.id}`);
                        });
                        comment.addEventListener('post-comment', function(e){
                            alert(`You posted the comment "${e.detail.value}"`);
                        });
                        comment.addEventListener('view-user', function(e){
                            alert(`You clicked on the user with id "${e.detail.id}"`);
                        });
                        comment.addEventListener('load-comment', function(e){
                            alert(`You clicked item id "${e.detail.id}" to load more comments`);
                            comment.loaderStatus = "disabled";
                        });
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>With error</h3>
        <demo-snippet>
            <template>
                <kwc-social-comments id="comment-error"
                                     item-id="59496a0d95c8344bcf3246ad">
                                    </kwc-social-comments>
                <script>
                    document.addEventListener('WebComponentsReady', function () {
                        const comment = document.querySelector('#comment-error');
                        comment.comments = ERROR_COMMENTS.entries;
                        comment.nextPage = ERROR_COMMENTS.next;
                        comment.addEventListener('post-comment', function(e){
                            alert(`You posted the comment "${e.detail.value}"`);
                        });
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>Loading next page</h3>
        <demo-snippet>
            <template>
                <kwc-social-comments id="comment-load"
                                     item-id="59496a0d95c8344bcf3246ad">
                                    </kwc-social-comments>
                <script>
                    document.addEventListener('WebComponentsReady', function () {
                        const comment = document.querySelector('#comment-load');
                        comment.comments = LOAD_COMMENTS.entries;
                        comment.nextPage = LOAD_COMMENTS.next;
                        comment.loaderStatus = "on";
                        comment.addEventListener('load-comment', function(e){
                            LOAD_COMMENTS.entries.push({
                                "id": "597f5855ab262e3b0c6d80dc",
                                "author": {
                                    "id": "597f01977fd88c3b0bfeec62",
                                    "username": "jonas17"
                                },
                                "text": "I keep on writing comments",
                                "date_created": "2017-07-31T16:18:29.067Z",
                                "flags": []
                            });
                            comment.loaderStatus = "off";
                            comment.notifySplices('comments', [
                            { index: 2, removed: [], addedCount: 1, object: LOAD_COMMENTS.entries, type: 'splice' }
                            ]);
                        });
                    });
                </script>
            </template>
        </demo-snippet>
    </div>
    <script>
        const MANY_COMMENTS = {
            "entries": [
                {
                    "id": "59bbd1b3badf002262db32ae",
                    "author": {
                        "id": "549dd41e77350606001a608a",
                        "username": "DJPMcG",
                        "avatar": "https://s3-eu-west-1.amazonaws.com/world.kano.me/users/avatars/549dd41e77350606001a608a/avatar-circle.png"
                    },
                    "text": "@jonas98765 How did you find this version of kano world???",
                    "date_created": "2017-09-15T13:12:19.494Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "597f5855ab262e3b0c6d80dc",
                    "author": {
                        "id": "597f01977fd88c3b0bfeec62",
                        "username": "jonas17",
                        "joined": "2017-07-31T10:08:23.509Z",
                    },
                    "text": "I keep on writing comments",
                    "date_created": "2017-07-31T16:18:29.067Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "597f58417fd88c3b0bfefc13",
                    "author": {
                        "id": "597f01977fd88c3b0bfeec62",
                        "username": "jonas17",
                        "joined": "2017-07-31T10:08:23.509Z",
                    },
                    "text": "you a great.",
                    "date_created": "2017-07-31T16:18:09.218Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "5968e63d53f869138f901c55",
                    "author": {
                        "id": "583c1fefdc1c6aad4a5124c6",
                        "username": "codebadger",
                        "admin_level": 98,
                        "joined": "2016-11-28T12:15:43.148Z",
                    },
                    "text": "I like looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong comments!",
                    "date_created": "2017-07-14T15:41:49.642Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "595b939b9f797577bd72c7cc",
                    "author": {
                        "id": "595a1d757f3cfa402b912d03",
                        "username": "codebadger3005",
                        "joined": "2017-07-03T10:33:25.387Z",
                    },
                    "text": "Very colourful!",
                    "date_created": "2017-07-04T13:09:47.872Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "595b93829f797577bd72c7c6",
                    "author": {
                        "id": "595a1d757f3cfa402b912d03",
                        "username": "codebadger3005",
                        "joined": "2017-07-03T10:33:25.387Z",
                    },
                    "text": "Oh hi",
                    "date_created": "2017-07-04T13:09:22.534Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "595b9365f183d177bc9cb060",
                    "author": {
                        "id": "595a1d757f3cfa402b912d03",
                        "username": "codebadger3005",
                        "joined": "2017-07-03T10:33:25.387Z",
                    },
                    "text": "Good work",
                    "date_created": "2017-07-04T13:08:53.809Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "595b93569f797577bd72c7c1",
                    "author": {
                        "id": "595a1d757f3cfa402b912d03",
                        "username": "codebadger3005",
                        "joined": "2017-07-03T10:33:25.387Z",
                    },
                    "text": "Jolly nice",
                    "date_created": "2017-07-04T13:08:38.785Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "594aa5640f3c5d2e8bbe481f",
                    "author": {
                        "id": "583c1fefdc1c6aad4a5124c6",
                        "username": "codebadger",
                        "admin_level": 98,
                        "joined": "2016-11-28T12:15:43.148Z",
                    },
                    "text": "Did you?",
                    "date_created": "2017-06-21T16:57:08.632Z",
                    "flags": [],
                    "spam": false
                }
            ],
            "total": 14,
            "pages": 0,
            "page": 0,
            "previous": null,
            "next": 1,
            "display": {
                "page": 1,
                "previous": 1,
                "next": 1
            }
        },
        ERROR_COMMENTS = {
            "entries": [
                {
                    "id": "59bbd1b3badf002262db32ae",
                    "author": {
                        "id": "549dd41e77350606001a608a",
                        "username": "DJPMcG",
                        "joined": "2014-12-26T21:33:18.126Z",
                        "avatar": "https://s3-eu-west-1.amazonaws.com/world.kano.me/users/avatars/549dd41e77350606001a608a/avatar-circle.png",
                    },
                    "text": "@jonas98765 How did you find this version of kano world???",
                    "date_created": "2017-09-15T13:12:19.494Z",
                    "flags": [],
                    "spam": false,
                    "error":true
                },
                {
                    "id": "59bbd18cbadf002262db32ab",
                    "author": {
                        "id": "549dd41e77350606001a608a",
                        "username": "DJPMcG",
                        "avatar": "https://s3-eu-west-1.amazonaws.com/world.kano.me/users/avatars/549dd41e77350606001a608a/avatar-circle.png",
                    },
                    "text": "@codebadger omg stop! That's SUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUPER annoying!",
                    "date_created": "2017-09-15T13:11:40.045Z",
                    "flags": [],
                    "spam": false
                }
            ],
            "total": 14,
            "pages": 0,
            "page": 0,
            "previous": null,
            "next": 1,
            "display": {
                "page": 1,
                "previous": 1,
                "next": 1
            }
        },
        LOAD_COMMENTS = {
            "entries": [
                {
                    "id": "59bbd1b3badf002262db32ae",
                    "author": {
                        "id": "549dd41e77350606001a608a",
                        "username": "DJPMcG",
                        "joined": "2014-12-26T21:33:18.126Z",
                        "avatar": "https://s3-eu-west-1.amazonaws.com/world.kano.me/users/avatars/549dd41e77350606001a608a/avatar-circle.png",
                    },
                    "text": "@jonas98765 How did you find this version of kano world???",
                    "date_created": "2017-09-15T13:12:19.494Z",
                    "flags": [],
                    "spam": false
                },
                {
                    "id": "59bbd18cbadf002262db32ab",
                    "author": {
                        "id": "549dd41e77350606001a608a",
                        "username": "DJPMcG",
                        "avatar": "https://s3-eu-west-1.amazonaws.com/world.kano.me/users/avatars/549dd41e77350606001a608a/avatar-circle.png",
                    },
                    "text": "@codebadger omg stop! That's SUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUPER annoying!",
                    "date_created": "2017-09-15T13:11:40.045Z",
                    "flags": [],
                    "spam": false
                }
            ],
            "total": 14,
            "pages": 0,
            "page": 0,
            "previous": null,
            "next": 1,
            "display": {
                "page": 1,
                "previous": 1,
                "next": 1
            }
        };
    </script>
</body>

</html>